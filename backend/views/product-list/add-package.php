<?phpuse backend\models\BillChargers;use yii\helpers\Html;use yii\bootstrap\ActiveForm;use appxq\sdii\helpers\SDNoty;use appxq\sdii\helpers\SDHtml;use yii\web\View;/* @var $this yii\web\View *//* @var $model backend\models\BillChargers *//* @var $form yii\bootstrap\ActiveForm */$this->title = 'จัดการพนักงานจัดของ';?>    <div class="bill-chargers-form">        <?php $form = ActiveForm::begin([            'id'=>$model->formName(),        ]); ?>        <div class="modal-header">            <button type="button" class="modalClose close">&times;</button>            <h4 class="modal-title" id="itemModalLabel" ><?= $this->title; ?></h4>        </div>        <div class="modal-body">            <div class="row">                <?= $form->field($model, 'bill_id')->hiddenInput()->label(false)?>                <div class="col-md-12">                    <?php                    /*ตัวอย่าง select2 get user*/                    $init_data=[];                    $userId=isset($model->user_id)?$model->user_id:'';                    $url = \yii\helpers\Url::to(['/select2/get-customer']);                    if($userId != ''){                        $init_data = \backend\classes\KNUser::getUserByIdAsSelect2($userId);                    }                    echo \backend\classes\KNSelect2::renderSelect2Single($form, $model, 'user_id', $init_data, $url, '-- เลือก --', 0,'พนักงานจัดของ');                    ?>                </div>                <div class="col-md-6">                    <?php                        $items = \yii\helpers\ArrayHelper::map(\backend\models\Treasurys::find()->all(),'id','name');                        $items2 = \yii\helpers\ArrayHelper::map(\backend\models\Storages::find()->all(),'id','name');                        $model->treasury = 1;                        $model->storage = 1;                    ?>                    <?= $form->field($model, 'treasury')->radioList($items)->label('ที่เก็บ') ?>                </div>                <div class="col-md-6">                    <?php echo $form->field($model, 'storage')->radioList($items2)?>                </div>                    <?= $form->field($model, 'percent')->hiddenInput()->label(false)?>                    <?= $form->field($model, 'type')->hiddenInput()->label(false) ?>            </div>        </div>        <div class="modal-footer" style="background: #f3f3f3;">            <div class="row">                <div class="col-md-6 col-md-offset-3">                    <?= Html::submitButton("เพิ่มข้อมูล",['class'=>'btn btn-success btn-block btn-lg']) ?>                </div>            </div>        </div>        <?php ActiveForm::end(); ?>    </div><?php  \richardfan\widget\JSRegister::begin([    //'key' => 'bootstrap-modal',    'position' => \yii\web\View::POS_READY]); ?>    <script>                  $("#modal-bill-items").animate({ scrollTop: 0 }, "slow");      $('.modalClose').on('click', function(){        $('#modal-user-shipping').modal('hide');        return false;    });        $('.close').on('click',function () {            $('#modal-bill-chargers').modal('hide');            return false;        });        $('form#<?= $model->formName()?>').on('beforeSubmit', function(e) {            var $form = $(this);            var formData = new FormData($(this)[0]);            $.ajax({                url:$form.attr('action'),                type:'POST',                data:formData,                processData: false,                contentType: false,                cache: false,                enctype: 'multipart/form-data',                success:function(result){                    <?= SDNoty::show('result.message', 'result.status')?>                    if(result.status == 'success') {                        $(document).find('#modal-user-shipping').modal('hide');                        setTimeout(function () {                            PreviewUserPackage();                            userPercent();                        },500);                    }                }            }).fail(function( jqXHR, textStatus ) {                <?= SDNoty::show('result.message', 'result.status')?>            });            return false;        });        function PreviewUserPackage(){            let url = '<?= \yii\helpers\Url::to(['/product-list/init-preview-user-shipping?type=99'])?>';            $.get(url, function (result) {                $("#preview-user-package").html(result);            });        }        function userPercent(){            let url = '<?= \yii\helpers\Url::to(['/product-list/cal-percent2'])?>';            $.get(url, function (result) {                $("#preview-user-cal2").html(result);            });        }        //product-list/cal-percent    </script><?php  \richardfan\widget\JSRegister::end(); ?>